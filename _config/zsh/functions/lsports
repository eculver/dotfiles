# List all listening ports with process info
local uname cmd
unamestr=$(uname)
if [[ "${unamestr}" == "Darwin" ]]; then
  cmd="netstat -Watnlv"
else
  cmd="sudo netstat -plant --extend"
fi

$cmd | grep LISTEN | awk '{"ps -o comm= -p " $9 | getline procname;colred="\033[01;31m";colclr="\033[0m"; print colred "proto: " colclr $1 colred " | addr.port: " colclr $4 colred " | pid: " colclr $9 colred " | name: " colclr procname;  }' | column -t -s "|"
